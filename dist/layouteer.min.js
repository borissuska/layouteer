!function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=5)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=i(1),s=(r=o)&&r.__esModule?r:{default:r};var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.columnsCount=t.columnsCount||12,this.columnSize=t.columnSize||11,this.content=t.content||e.generateLayout(this.columnsCount,this.columnSize),this.editor=new s.default(t.editor,this)}return n(e,null,[{key:"init",value:function(t){return new e(t)}},{key:"contentDimensions",value:function(e){var t=0,i=0,r=e.split("\n");i=r.length;for(var n=0;n<r.length;n++){var o=r[n].length;if(0==o)i+=1;else if(0==t)t=o;else if(t!=o)return!1}return{width:t,height:i}}},{key:"generateRuler",value:function(e,t){for(var i="|",r="",n=0;n<t;n++)r+=" ";r+="|";for(var o=0;o<e;o++)i+=r;return i}},{key:"generateLayout",value:function(e,t){for(var i=e*t+e+1,r=Math.round(9.6*i/16*9/18),n="+",o="|",s=0;s<i-2;s++)n+="-",o+=" ";o+="|";for(var u=(n+="+")+"\n",l=0;l<r-2;l++)u+=o+"\n";return u+n}}]),e}();t.default=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,n=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),o=i(0),s=(r=o)&&r.__esModule?r:{default:r};function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=function(){function e(t,i){if(u(this,e),!t)throw"Editor element is not defined, unable create editor";var r=s.default.contentDimensions(i.content);if(!r)throw"Invalid content dimensions, unable create editor.";this.element=t,this.layouteer=i,this.index=new Array(r.height);for(var n=0;n<r.height;n++)this.index[n]=new Array(r.width);this.cursor=void 0,this.selection=void 0,this.bindToElement()}return n(e,[{key:"bindEventHandlers",value:function(){var e=this;this.element.addEventListener("click",function(t){e.setCursor(t.target._index)}),this.element.addEventListener("keydown",function(t){switch(t.code){case"ArrowDown":for(var i=e.cursor.bottom;(t.metaKey||t.ctrlKey)&&i&&!i.isHorizontalLine();)i=i.bottom;i&&e.setCursor(i);break;case"ArrowUp":for(var r=e.cursor.top;(t.metaKey||t.ctrlKey)&&r&&!r.isHorizontalLine();)r=r.top;r&&e.setCursor(r);break;case"ArrowLeft":var n=e.cursor.left;(t.metaKey||t.ctrlKey||e.cursor.isHorizontalLine())&&(n=e.index[e.cursor.row][e.previousColumnIndex()]),n&&e.setCursor(n);break;case"ArrowRight":var o=e.cursor.right;(t.metaKey||t.ctrlKey||e.cursor.isHorizontalLine())&&(o=e.index[e.cursor.row][e.nextColumnIndex()]),o&&e.setCursor(o);break;case"Backspace":if(e.cursor.isCorner())break;if(e.cursor.isHorizontalLine())for(var s=e.cursor.bottom;s&&s.isVerticalLine();){if(s.setValue("&nbsp;"),s.right&&s.right.isHorizontalLine()){var u=s;do{u.setValue("-"),u=u.left}while(u&&!u.isVerticalLine())}if(s.left&&s.left.isHorizontalLine()){var l=s;do{l.setValue("-"),l=l.right}while(l&&!l.isVerticalLine())}s=s.bottom}else if(e.cursor.isVerticalLine())for(var a=e.cursor.right;a&&a.isHorizontalLine();){if(a.setValue("&nbsp;"),a.bottom&&a.bottom.isVerticalLine()){var c=a;do{c.setValue("|"),c=c.top}while(c&&!c.isHorizontalLine())}if(a.top&&a.top.isVerticalLine()){var h=a;do{h.setValue("|"),h=h.bottom}while(h&&!h.isHorizontalLine())}a=a.right}break;case"Enter":break;default:switch(t.key){case"|":e.makeColumn();break;case"-":e.makeRow()}}t.preventDefault()})}},{key:"bindToElement",value:function(){this.element.classList.add("layouteer-editor"),this.element.tabIndex=1,this.bindEventHandlers();var e=document.createElement("div");e.classList.add("ruler"),e.innerHTML=s.default.generateRuler(this.layouteer.columnsCount,this.layouteer.columnSize).split(" ").join("&nbsp;"),this.element.appendChild(e);for(var t=0;t<this.index.length;t++){var i=this.index[t],r=document.createElement("div");this.element.appendChild(r);for(var n=0;n<i.length;n++){var o=this.layouteer.content[t*i.length+t+n],u=document.createElement("span");u.innerHTML=" "!=o?o:"&nbsp;",r.appendChild(u);var l=n>0?this.index[t][n-1]:void 0,c=t>0?this.index[t-1][n]:void 0,h=this.index[t][n]=new a({el:u,rowEl:r,row:t,column:n,left:l,top:c,right:void 0,bottom:void 0,line:void 0});u._index=h,l&&(l.right=h),c&&(c.bottom=h)}}this.__buildLineIndex__(),this.setCursor(this.index[0][0])}},{key:"__buildLineIndex__",value:function(){this.getHLineInfo(this.index[0][0])}},{key:"getHLineInfo",value:function(e){var t={horizontal:!0},i={},r=[],n=e,o=e;if(e)for(var s=e;s&&s.isHorizontalLine();)s.line=t,i[s.column]=s,o=s,s.bottom&&s.bottom.isVerticalLine()&&r.push(this.getVlineInfo(s.bottom)),s=s.right;return t.cells=i,t.from=n,t.to=o,t.startingLines=r,t}},{key:"getVlineInfo",value:function(e){var t={vertical:!0},i={},r=[],n=e,o=e;if(e)for(var s=e;s&&s.isVerticalLine();)s.line=t,i[s.row]=s,o=s,s.right&&s.right.isHorizontalLine()&&r.push(this.getHLineInfo(s.right)),s=s.bottom;return t.cells=i,t.from=n,t.to=o,t.startingLines=r,t}},{key:"setCursor",value:function(e){this.cursor&&this.cursor.el.classList.remove("cursor"),this.cursor=e,this.cursor&&this.cursor.el.classList.add("cursor")}},{key:"nextColumnIndex",value:function(e){return void 0==e&&(e=this.cursor),(parseInt(e.column/(this.layouteer.columnSize+1))+1)*(this.layouteer.columnSize+1)}},{key:"previousColumnIndex",value:function(e){return void 0==e&&(e=this.cursor),parseInt((e.column-1)/(this.layouteer.columnSize+1))*(this.layouteer.columnSize+1)}},{key:"makeColumn",value:function(){if(this.cursor&&this.cursor.isHorizontalLine()){var e=Math.round(this.cursor.column/(this.layouteer.columnSize+1))*(this.layouteer.columnSize+1);this.setCursor(this.index[this.cursor.row][e]);for(var t=this.cursor;t.left&&t.isHorizontalLine();)t=t.left;var i=this.cursor,r=!1;do{for(i=i.bottom,t=t.bottom,r=!1;i&&!i.isHorizontalLine();)i.isVerticalLine()&&(r=!0),i.setValue("|"),i=i.bottom,t=t.bottom;(r=r&&t.isVerticalLine()&&!t.isCorner())&&i.setValue("|")}while(i&&r);this.__buildLineIndex__()}}},{key:"makeRow",value:function(){if(this.cursor&&this.cursor.isVerticalLine()){for(var e=this.cursor;e.top&&e.isVerticalLine();)e=e.top;var t=this.cursor,i=!1;do{for(t=t.right,e=e.right,i=!1;t&&!t.isVerticalLine();)"-"==t.getValue()&&(i=!0),t.setValue("-"),t=t.right,e=e.right;(i=i&&e.isHorizontalLine()&&!e.isCorner())&&t.setValue("-")}while(t&&i);this.__buildLineIndex__()}}}]),e}();t.default=l;var a=function(){function e(t){u(this,e),this.el=t.el,this.rowEl=t.rowEl,this.row=t.row,this.column=t.column,this.left=t.left,this.top=t.top,this.right=t.right,this.bottom=t.bottom,this.line=t.line}return n(e,[{key:"isCorner",value:function(){return"+"==this.getValue()}},{key:"isHorizontalLine",value:function(){return"-"==this.getValue()||this.isCorner()}},{key:"isVerticalLine",value:function(){return"|"==this.getValue()||this.isCorner()}},{key:"setValue",value:function(e){this.el.innerHTML=e}},{key:"getValue",value:function(){return this.el.innerHTML}}]),e}()},function(e,t,i){"use strict";var r,n=i(0),o=(r=n)&&r.__esModule?r:{default:r};window.layouteer=o.default},,function(e,t,i){},function(e,t,i){i(4),e.exports=i(2)}]);
//# sourceMappingURL=layouteer.min.js.map